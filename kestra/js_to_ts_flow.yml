id: js_to_ts_agent
namespace: hackathon.agent

tasks:
  - id: observe_and_decide
    type: io.kestra.plugin.scripts.python.Script
    script: |
      import os

      path = "../sample-repo/legacy-app"
      files = os.listdir(path)
      js_files = [f for f in files if f.endswith(".js")]

      decision = "APPLY" if len(js_files) <= 3 else "DRY_RUN"
      print({
        "js_files": len(js_files),
        "decision": decision
      })
